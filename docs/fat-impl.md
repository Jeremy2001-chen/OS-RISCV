# FAT 文件系统的实现

FAT 文件系统的实现，分为了磁盘层，数据层，FAT 层，文件层，应用层。

## 磁盘层

使用设备驱动，如 `sdRead`、`sdWrite`，对某个设备块进行读写到块缓存中。块缓存记录了设备号和块号。当缓存满了以后，就进行写回。

## 数据层

数据层包含以下函数：

> `struct buf* bread(uint dev, uint blockno);`

表示从表示读某设备某块的缓存。如该块原本没有缓存，则先从设备上将该块读到缓存中。

文件系统 `fs` 通过 `fs.read()` 函数读到某块缓存。

一般情况下（没有 mount 磁盘镜像的情况下），有 `fs.read == bread`。

## 文件层
